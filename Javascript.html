<script>
    $(".input").addEventListener("keydown",function(event) {
      if (event.key == "Enter") {
        checkStatus();
      }
    });

    function checkStatus() {
      var id = parseInt(document.getElementById("input").value);
      if (isIdNumberReal(id)) {
        document.getElementById("output").innerHTML = "checking..."
        google.script.run.withSuccessHandler(printStatus).getStatus(id);
      }
      else {
        printStatus("error");
      }
    }

    function isIdNumberReal(id) {
      if (!isNaN(id) && id > 100000 && id < 999999) return true;
    }

    function printStatus(status) {
      var doc = document.getElementById("output");
      var background = document.getElementById("overlay");
      if (status == "Yes") {
        doc.innerHTML = "You are good :)";
        background.style.backgroundColor = "rgba(0,230,0,0.4)";
      }
      else if (status == "No") {
        doc.innerHTML = "Your eligibility is at RISK -- See Mrs.Diers immediately!";
        background.style.backgroundColor = "rgba(255,0,0,0.4)";
      }
      else if (status == "missing") {
        doc.innerHTML = "There seems to be a problem -- See Mrs.Diers immediately!";
        background.style.backgroundColor = "rgba(255,128,0,0.4)";
      }
      else {
        doc.innerHTML = "Please type your 6 digit ID number";
        background.style.backgroundColor = "rgba(255,128,0,0.4)";
      }
    }
</script>
